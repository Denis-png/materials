html
    head
        title= 'JS Materials'

        script(src='https://cdnjs.cloudflare.com/ajax/libs/pdf.js/2.11.338/pdf.min.js')
        link(type='text/css', href='')
    body
        if student
            h1 #{student}
            ul(class='')
                each m in material
                    li
                        button(onclick='openMaterial(this.id)', id=m.name) #{m.chapter}.#{m.name}

            each m in material
                div(id='modal' + m.name, style='display:none;')
                    h1 #{m.name}
                    canvas(id='canvas')
            

            script(type='text/javascript').
                function openMaterial(id) {
                    let materials = !{JSON.stringify(material)}
                    materials.forEach(m => {
                        const to_close = document.getElementById('modal' + m.name)
                        to_close.style.display = 'none'

                    })
                    const b = document.getElementById(id)
                    const modal = document.getElementById('modal' + id)
                    modal.style.display = 'block'
                    const url = './test.pdf'
                    console.log(url)
                    // Loaded via <script> tag, create shortcut to access PDF.js exports.
                    var pdfjsLib = window['pdfjs-dist/build/pdf'];

                    // The workerSrc property shall be specified.
                    pdfjsLib.GlobalWorkerOptions.workerSrc =
                        'pdfjs-dist/build/pdf.worker.js';

                    const loadingTask = pdfjsLib.getDocument(url);
                    (async () => {
                        const pdf = await loadingTask.promise;
                        //
                        // Fetch the first page
                        //
                        const page = await pdf.getPage(1);
                        const scale = 1.5;
                        const viewport = page.getViewport({scale});
                        // Support HiDPI-screens.
                        const outputScale = window.devicePixelRatio || 1;

                        //
                        // Prepare canvas using PDF page dimensions
                        //
                        const canvas = document.getElementById("canvas");
                        const context = canvas.getContext("2d");

                        canvas.width = Math.floor(viewport.width * outputScale);
                        canvas.height = Math.floor(viewport.height * outputScale);
                        canvas.style.width = Math.floor(viewport.width) + "px";
                        canvas.style.height = Math.floor(viewport.height) + "px";

                        const transform = outputScale !== 1
                            ? [outputScale, 0, 0, outputScale, 0, 0]
                            : null;

                        //
                        // Render PDF page into canvas context
                        //
                        const renderContext = {
                            canvasContext: context,
                            transform,
                            viewport,
                        };
                        page.render(renderContext);
                    })();
                }




            if student == 'admin'
                include material

        else
            form(method='post' action='auth')
                input(type="text" placeholder="Name..." name="studentName")
                input(type="text" placeholder="Student ID..." name="studentID")
                button(type='submit')='Sign In'


