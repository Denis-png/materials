<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Leaflet demo</title>
    <link
      rel="stylesheet"
      href="https://unpkg.com/leaflet@1.7.1/dist/leaflet.css"
      integrity="sha512-xodZBNTC5n17Xt2atTPuE1HxjVMSvLVW9ocqUKLsCC5CXdbqCmblAshOMAS6/keqq/sMZMZ19scR4PsZChSR7A=="
      crossorigin=""
    />
    <!--  <link
      rel="stylesheet"
      href="https://unpkg.com/leaflet-routing-machine@latest/dist/leaflet-routing-machine.css"
    /> -->

    <script
      src="https://unpkg.com/leaflet@1.7.1/dist/leaflet.js"
      integrity="sha512-XQoYMqMTK8LvdxXYG3nZ448hOEQiglfqkJs1NOQV44cWnUrBc8PkAOcXy20w0vlaXaVUearIOBhiXZ5V3ynxwA=="
      crossorigin=""
    ></script>
    <link
      rel="stylesheet"
      href="https://unpkg.com/leaflet-routing-machine@latest/dist/leaflet-routing-machine.css"
    />
    <script src="https://unpkg.com/leaflet-routing-machine@latest/dist/leaflet-routing-machine.js"></script>

    <!-- <link
      rel="stylesheet"
      href="https://unpkg.com/leaflet-draw@0.4.1/dist/leaflet.draw.css"
    />
    <script src="https://unpkg.com/leaflet-draw@0.4.1/dist/leaflet.draw.js"></script> -->
    <link rel="stylesheet" href="Lesson6.css" />
  </head>
  <body>
    <div id="mapid"></div>

    <script>
      //Map initialization
      const map = L.map("mapid").setView([50.130681, 14.373853], 18);

      //Add tiles
      L.tileLayer("https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png", {
        attribution:
          '&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors',
      }).addTo(map);

      //Add pointer
      //L.marker([50.131288684243174, 14.37329579377547]).addTo(map);

      //marker text
      /* L.marker([50.13124336249122, 14.373243805021051])
        .addTo(map)
        .bindPopup("This is Faculty of Economics and Management");
      //.openPopup(); */

      //custom marker
      const myIcon = L.icon({
        iconUrl: "./cs_PEF.png",
        iconSize: [38, 38],
        iconAnchor: [22, 37],
        popupAnchor: [0, -35],
      });

      //use custom marker
      L.marker([50.13124336249122, 14.373243805021051], {
        icon: myIcon,
      })
        .addTo(map)
        .bindPopup("This is Faculty of Economics and Management");
      //.openPopup();

      /* map.on("click", (e) => {
        console.log("Lat, Lon : " + e.latlng.lat + ", " + e.latlng.lng);
      }); */

      //polygon
      const polygon = L.polygon(
        [
          [50.13169673926953, 14.372999640181662],
          [50.13137005911273, 14.37306937761605],
          [50.13135979659141, 14.372965693473818],
          [50.13117748871239, 14.373010369017722],
          [50.13118436624002, 14.373117657378318],
          [50.130720130905765, 14.373241038993003],
          [50.13065135491765, 14.37254902906716],
          [50.130458781625144, 14.372602673247458],
          [50.130534435511045, 14.373493166640403],
          [50.13120156005479, 14.3732946831733],
          [50.13128409027976, 14.3740510661155],
          [50.13114310105935, 14.374099345877768],
          [50.13117061118376, 14.374276371672751],
          [50.131301284058715, 14.374244185164573],
          [50.13132535533885, 14.374372931197287],
          [50.131493853960876, 14.37431928701699],
          [50.131493853960876, 14.374185176566245],
          [50.131827410707785, 14.374088617041709],
          [50.13180677839916, 14.373916955664756],
          [50.131466344022314, 14.374002786353232],
          [50.13139069160967, 14.373262496665122],
          [50.131727687800314, 14.373165937140586],
          [50.13170361672253, 14.372988911345603],
        ],
        /* { color: "grey", opacity: 0.5 } */
        { color: "grey", opacity: 0.5 }
      ).addTo(map);

      //change polygon styles - regular function
      /* polygon.on("mouseover", function () {
        this.setStyle({
          color: "red",
        });
      });

      polygon.on("mouseout", function () {
        this.setStyle({
          color: "grey",
        });
      }); */

      //change polygon styles - arrow function
      polygon.on("mouseover", (e) => {
        e.target.setStyle({
          color: "red",
        });
      });

      polygon.on("mouseout", (e) => {
        e.target.setStyle({
          color: "grey",
        });
      });

      /* L.Routing.control({
        waypoints: [L.latLng(57.74, 11.94), L.latLng(57.6792, 11.949)],
      }).addTo(map); */

      //routing
      L.Routing.control({
        waypoints: [
          L.latLng(50.13330431702395, 14.377029198221862),
          L.latLng(50.10263771849553, 14.39462702488527),
        ],
      }).addTo(map);

      //50.13330431702395, 14.377029198221862 - ÄŒZU
      //50.10263771849553, 14.39462702488527 - DEJVICE
    </script>
  </body>
</html>

<!-- <!DOCTYPE html>
<html>
  <head>
    <title>Leaflet.draw drawing and editing tools</title>

    <link
      rel="stylesheet"
      href="https://unpkg.com/leaflet@1.0.1/dist/leaflet.css"
    />
    <script src="https://unpkg.com/leaflet@1.0.1/dist/leaflet.js"></script>

    <link
      rel="stylesheet"
      href="https://unpkg.com/leaflet-draw@0.4.1/dist/leaflet.draw.css"
    />
    <script src="https://unpkg.com/leaflet-draw@0.4.1/dist/leaflet.draw.js"></script>
  </head>
  <body>
    <div
      id="map"
      style="width: 400px; height: 400px; border: 1px solid #ccc"
    ></div>
    <button id="changeColor">Rectangle -> Blue</button>
    <script>
      var osmUrl = "http://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",
        osmAttrib =
          '&copy; <a href="http://openstreetmap.org/copyright">OpenStreetMap</a> contributors',
        osm = L.tileLayer(osmUrl, { maxZoom: 18, attribution: osmAttrib }),
        map = new L.Map("map", {
          layers: [osm],
          center: new L.LatLng(51.509, -0.08),
          zoom: 14,
        });

      var drawnItems = new L.FeatureGroup();
      map.addLayer(drawnItems);

      var polyLayers = [];

      var polygon1 = L.polygon([
        [51.509, -0.08],
        [51.503, -0.06],
        [51.51, -0.047],
      ]);
      polyLayers.push(polygon1);

      var polygon2 = L.polygon([
        [51.512642, -0.099993],
        [51.520387, -0.087633],
        [51.509116, -0.082483],
      ]);
      polyLayers.push(polygon2);

      // Add the layers to the drawnItems feature group
      for (layer of polyLayers) {
        drawnItems.addLayer(layer);
      }

      // Set the title to show on the polygon button
      L.drawLocal.draw.toolbar.buttons.polygon = "Draw a sexy polygon!";

      var drawControl = new L.Control.Draw({
        position: "topright",
        draw: {
          polyline: {
            metric: true,
          },
          polygon: {
            allowIntersection: false,
            showArea: true,
            drawError: {
              color: "#b00b00",
              timeout: 1000,
            },
            shapeOptions: {
              color: "#bada55",
            },
          },
          circle: {
            shapeOptions: {
              color: "#662d91",
            },
          },
          marker: false,
        },
        edit: {
          featureGroup: drawnItems,
          remove: false,
        },
      });
      map.addControl(drawControl);

      map.on("draw:created", function (e) {
        var type = e.layerType,
          layer = e.layer;

        if (type === "marker") {
          layer.bindPopup("A popup!");
        }

        drawnItems.addLayer(layer);
      });

      map.on("draw:edited", function (e) {
        var layers = e.layers;
        var countOfEditedLayers = 0;
        layers.eachLayer(function (layer) {
          countOfEditedLayers++;
        });
        console.log("Edited " + countOfEditedLayers + " layers");
      });

      L.DomUtil.get("changeColor").onclick = function () {
        drawControl.setDrawingOptions({
          rectangle: { shapeOptions: { color: "#004a80" } },
        });
      };
    </script>
  </body>
</html> -->
